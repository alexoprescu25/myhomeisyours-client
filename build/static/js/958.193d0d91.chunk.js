"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[958],{3306:(e,t,s)=>{s.d(t,{ec:()=>i,hU:()=>n,lw:()=>d,mb:()=>l,z0:()=>r});var a=s(6717),c=s(4997);const n=async()=>await(0,a.F)("/user/fetch-all"),d=async e=>await(0,a.F)("/user/delete",{method:c.y8.POST,data:JSON.stringify({accountId:e})}),l=async e=>await(0,a.F)("/user/fetch-by-id",{method:c.y8.POST,data:JSON.stringify({accountId:e})}),i=async(e,t)=>await(0,a.F)("/user/change-password",{method:c.y8.POST,data:JSON.stringify({accountId:e,password:t})}),r=async(e,t)=>await(0,a.F)("/user/update",{method:c.y8.POST,data:JSON.stringify({accountId:e,data:t})})},2958:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var a=s(5043),c=s(5475);const n={accounts__delete:"Accounts_accounts__delete__jzHvn","heading-primary":"Accounts_heading-primary__mnhGs",accounts:"Accounts_accounts__qFp63",accounts__link:"Accounts_accounts__link__idR17",accounts__name:"Accounts_accounts__name__uLcx0",delete__container:"Accounts_delete__container__1CFlg",delete__image:"Accounts_delete__image__dZoI+",delete__actions:"Accounts_delete__actions__klIz2",delete__heading:"Accounts_delete__heading__8UDFd"};var d=s(9542),l=s(8363),i=s(3910),r=s(7929),o=s(3306),_=s(8192),u=s(579);const h=()=>{const[e,t]=(0,a.useState)(!1),[s,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)(null),[j,y]=(0,a.useState)(!1),[N,g]=(0,a.useState)(null),A=async()=>{try{const e=await(0,o.hU)();e&&200===e.status&&x(e.data.users)}catch(e){(0,_.t6)(e,!0)}},f=()=>{g(null),t(!1)};return(0,a.useEffect)((()=>{A()}),[]),m?(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(d.Xr,{isOpen:s,onClose:()=>h(!1),children:(0,u.jsx)(l.A,{onSubmit:async()=>{await A(),h(!1)}})}),(0,u.jsx)(d.Xr,{isOpen:e,onClose:f,children:(0,u.jsx)("div",{className:n.delete,children:(0,u.jsxs)("div",{className:n.delete__container,children:[(0,u.jsx)("div",{className:n.delete__image,children:(0,u.jsx)("img",{src:"/images/exclamation.png",alt:"Exclamation"})}),(0,u.jsxs)("div",{className:n.delete__content,children:[(0,u.jsx)("p",{className:n.delete__heading,children:"Delete User"}),(0,u.jsxs)("p",{className:n.delete__text,children:["Are you sure you want to delete user ",N&&N.name,"? "]})]}),(0,u.jsxs)("div",{className:n.delete__actions,children:[(0,u.jsx)(d.$n,{mode:"slate-grey",onClick:f,children:"Cancel"}),(0,u.jsx)(d.$n,{mode:"danger",onClick:async()=>{if(y(!0),N)try{const e=await(0,o.lw)(N.id);e&&200===e.status&&(await A(),await(0,_.fm)(100),f())}catch(e){console.error(e)}finally{y(!1)}},isLoading:j,children:"Delete"})]})]})})}),(0,u.jsx)(d.uA,{className:n.accounts,children:(0,u.jsx)("div",{className:n.accounts__container,children:(0,u.jsxs)(d.XI,{title:"Users",onClick:()=>h(!0),children:[(0,u.jsx)(d.nd,{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Name"}),(0,u.jsx)("th",{children:"Role"}),(0,u.jsx)("th",{children:"Created By"}),(0,u.jsx)("th",{children:"Created At"}),(0,u.jsx)("th",{children:"Updated At"}),(0,u.jsx)("th",{children:"Actions"})]})}),(0,u.jsx)(d.BF,{children:m.map((e=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(0,u.jsxs)("span",{className:n.accounts__name,children:[(0,u.jsx)(d.Aw,{name:e.fullName,width:40}),(0,u.jsx)(c.N_,{className:n.accounts__link,to:"/dashboard/accounts/".concat(e._id.toString()),children:e.fullName})]})}),(0,u.jsxs)("td",{children:[" ",e.role," "]}),(0,u.jsx)("td",{children:e.createdBy&&e.createdBy.fullName?(0,u.jsxs)(c.N_,{className:n.accounts__link,to:"/dashboard/accounts/".concat(e.createdBy._id.toString()),children:[" ",e.createdBy.fullName," "]}):(0,u.jsx)("p",{children:"N/A"})}),(0,u.jsxs)("td",{children:[" ",(0,_.Yq)(e.createdAt,"LL")," - ",(0,_.Yq)(e.createdAt,"LT"),"  "]}),(0,u.jsxs)("td",{children:[" ",(0,_.Yq)(e.updatedAt,"LL")," - ",(0,_.Yq)(e.updatedAt,"LT"),"  "]}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{className:n.accounts__delete,onClick:()=>{var s,a;s=e._id,a=e.fullName,g({id:s,name:a}),(0,_.fm)(100).then((()=>{t(!0)}))},children:(0,u.jsx)(i.g,{icon:r.yLS})})})]},e._id.toString())))})]})})})]}):(0,u.jsx)(d.aH,{})}}}]);
//# sourceMappingURL=958.193d0d91.chunk.js.map