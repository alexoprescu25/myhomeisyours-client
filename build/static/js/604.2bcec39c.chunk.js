"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[604],{2494:(e,r,s)=>{s.d(r,{N8:()=>c,y$:()=>k,IW:()=>B});const a={"heading-primary":"AddressCard_heading-primary__kgQEs",address:"AddressCard_address__ZDJ1F",address__confidence:"AddressCard_address__confidence__D3ov4",address__address:"AddressCard_address__address__Wuq20","address__percentage--danger":"AddressCard_address__percentage--danger__3SFat","address__percentage--warning":"AddressCard_address__percentage--warning__1jP5b","address__percentage--info":"AddressCard_address__percentage--info__5XEbO","address__percentage--success":"AddressCard_address__percentage--success__YNWVL","address--active":"AddressCard_address--active__76B0T"};var t=s(3910),d=s(7929),i=s(8139),o=s.n(i),n=s(579);const c=e=>{let{address:r,isActive:s,onSelect:i}=e;return(0,n.jsx)("div",{onClick:()=>{i(r)},className:o()(a.address,{[a["address--active"]]:s}),children:(0,n.jsx)("div",{className:a.address__container,children:(0,n.jsxs)("div",{className:a.address__string,children:[(0,n.jsxs)("div",{className:a.address__address,children:[(0,n.jsx)(t.g,{icon:d.gKm}),(0,n.jsxs)("p",{children:[" ",r.address.freeformAddress," "]})]}),(0,n.jsxs)("p",{className:a.address__confidence,children:["Match Confidence: ",(0,n.jsxs)("span",{className:a["address__percentage--".concat((()=>{if(!r.matchConfidence.score)return;const e=Number((100*r.matchConfidence.score).toFixed(0));return e?e>=0&&e<=25?"danger":e>25&&e<=50?"warning":e>50&&e<=75?"info":e>75?"success":void 0:void 0})())],children:[" ",(100*r.matchConfidence.score).toFixed(2),"% "]})]})]})})})};var p=s(5043),l=s(5475),_=s(3216);const m="SearchBar_search__UvOm0",y="SearchBar_search__header__bBL4G",h="SearchBar_search__heading__J6z-I",u="SearchBar_search__text__fosrb",g="SearchBar_search__container__FoIGx",x="SearchBar_search__top__SQpSQ",f="SearchBar_search__bottom__hQ-M2",S="SearchBar_search__checkboxes__rkee4",j="SearchBar_search__form__lnZDw",v="SearchBar_search__distance__2QPTW",N="SearchBar_search__clear__3HYke",b="SearchBar_search__buttons__BIjyk";var w=s(9542),F=s(4858);const P={queryString:"",maxDistance:"",numberOfBedrooms:"",numberOfBathrooms:"",propertyType:"",petFriendly:!1,walkInShower:!1,groundFloor:!1},O=[{name:"5 Miles",value:"8000"},{name:"10 Miles",value:"16000"},{name:"15 Miles",value:"24000"},{name:"20 Miles",value:"32000"}],C=[{name:"House",value:"house"},{name:"Bungalow",value:"bungalow"},{name:"Maisonette",value:"maisonette"},{name:"Apartment",value:"apartment"}],B=e=>{let{isLoading:r,onSave:s,onClear:a}=e;const{watch:t,reset:i,control:o,register:c,setValue:B,handleSubmit:I,formState:{errors:T}}=(0,F.mN)({defaultValues:P}),[k,A]=(0,l.ok)(),J=(0,_.Zp)();return(0,p.useEffect)((()=>{const e=k.get("queryString"),r=k.get("maxDistance"),s=k.get("bedrooms"),a=k.get("bathrooms"),t=k.get("propertyType"),d=k.get("petFriendly"),i=k.get("walkInShower"),o=k.get("groundFloor");e&&B("queryString",e),r&&B("maxDistance",r),s&&B("numberOfBedrooms",s),a&&B("numberOfBathrooms",a),t&&B("propertyType",t),d&&/true/.test(d)?B("petFriendly",!0):B("petFriendly",!1),i&&/true/.test(i)?B("walkInShower",!0):B("walkInShower",!1),o&&/true/.test(o)?B("groundFloor",!0):B("groundFloor",!1)}),[]),(0,n.jsxs)("div",{className:m,children:[(0,n.jsxs)("div",{className:y,children:[(0,n.jsx)("p",{className:h,children:"Nearby Search"}),(0,n.jsx)("p",{className:u,children:"Need to find something nearby? Just enter your address and choose a maximum distance to see the best local options!"})]}),(0,n.jsx)("div",{className:g,children:(0,n.jsxs)("form",{onSubmit:I((async e=>{J("?queryString=".concat(e.queryString,"&maxDistance=").concat(e.maxDistance,"&propertyType=").concat(e.propertyType,"&bedrooms=").concat(e.numberOfBedrooms,"&bathrooms=").concat(e.numberOfBathrooms,"&petFriendly=").concat(e.petFriendly,"&walkInShower=").concat(e.walkInShower,"&groundFloor=").concat(e.groundFloor)),s(e)})),className:j,children:[(0,n.jsxs)("div",{className:x,children:[(0,n.jsx)(w.pd,{label:"Address / Postcode",name:"queryString",register:c,rules:{required:"Address is required"},errors:T,icon:d.$UM,required:!0}),(0,n.jsx)("div",{className:v,children:(0,n.jsx)(F.xI,{name:"maxDistance",control:o,rules:{required:"Distance is required"},render:e=>{let{field:r}=e;return(0,n.jsx)(w.l6,{...r,optionsArray:O,errors:T,defaultValue:"Max Distance"})}})})]}),(0,n.jsxs)("div",{className:f,children:[(0,n.jsx)(w.pd,{type:"number",label:"Bedrooms",name:"numberOfBedrooms",register:c}),(0,n.jsx)(w.pd,{type:"number",label:"Bathrooms",name:"numberOfBathrooms",register:c}),(0,n.jsx)(F.xI,{name:"propertyType",control:o,render:e=>{let{field:r}=e;return(0,n.jsx)(w.l6,{...r,optionsArray:C,defaultValue:"Property Type"})}})]}),(0,n.jsxs)("div",{className:S,children:[(0,n.jsx)(F.xI,{name:"petFriendly",control:o,render:e=>{let{field:r}=e;return(0,n.jsx)(w.Sc,{id:"petFriendly",checked:t("petFriendly"),label:"Pet Friendly",...r})}}),(0,n.jsx)(F.xI,{name:"walkInShower",control:o,render:e=>{let{field:r}=e;return(0,n.jsx)(w.Sc,{id:"walkInShower",checked:t("walkInShower"),label:"Walk In Shower",...r})}}),(0,n.jsx)(F.xI,{name:"groundFloor",control:o,render:e=>{let{field:r}=e;return(0,n.jsx)(w.Sc,{id:"groundFloor",checked:t("groundFloor"),label:"Ground Floor",...r})}})]}),(0,n.jsxs)("div",{className:b,children:[(0,n.jsx)(w.$n,{type:"submit",mode:"main",isLoading:r,children:"Search"}),(0,n.jsx)("a",{href:"#",className:N,onClick:()=>{A(""),i(),a()},children:"Clear Filters"})]})]})})]})},I={"heading-primary":"PropertyCard_heading-primary__CC+7Q",property:"PropertyCard_property__2h9xd",property__title:"PropertyCard_property__title__RAWY+",property__status:"PropertyCard_property__status__PbF-Z",property__link:"PropertyCard_property__link__lXxy3",property__image:"PropertyCard_property__image__OjszW",property__details:"PropertyCard_property__details__JKDJU","property__status--title":"PropertyCard_property__status--title__iKoo9","property__status--active":"PropertyCard_property__status--active__atb5u","property__status--inactive":"PropertyCard_property__status--inactive__SfbD4",property__address:"PropertyCard_property__address__auPiA","property__address--freeForm":"PropertyCard_property__address--freeForm__lLfYG","property__address--propertyType":"PropertyCard_property__address--propertyType__4YZBN",property__summary:"PropertyCard_property__summary__oyPlB","property__summary--item":"PropertyCard_property__summary--item__I0pmW","property__summary--itemLight":"PropertyCard_property__summary--itemLight__RqVKb","property__summary--itemBold":"PropertyCard_property__summary--itemBold__0ma-2"};var T=s(4997);const k=e=>{let{item:r}=e;return(0,n.jsxs)("div",{className:I.property,children:[(0,n.jsx)("div",{className:I.property__image,children:r.images&&r.images.length>0?(0,n.jsx)("img",{src:r.images[0].url,alt:r.images[0].name,loading:"lazy"},r.images[0]._id):(0,n.jsx)("img",{src:"/images/random-house.jpg",loading:"lazy",alt:""})}),(0,n.jsxs)("div",{className:I.property__details,children:[(0,n.jsxs)("div",{className:I.property__status,children:[(0,n.jsx)("div",{className:I.property__title,children:(0,n.jsx)(l.N_,{to:"/dashboard/properties/list/".concat(r._id.toString()),children:r.name})}),r.isActive?(0,n.jsx)("p",{className:I["property__status--active"],children:"Active"}):(0,n.jsx)("p",{className:I["property__status--inactive"],children:"Inactive"})]}),(0,n.jsx)("div",{className:I.property__public}),(0,n.jsxs)("div",{className:I.property__address,children:[(0,n.jsxs)("p",{className:I["property__address--freeForm"],children:[" ",(0,n.jsx)(t.g,{icon:d.gKm})," ",r.address.freeFormAddress]}),(0,n.jsxs)("p",{className:I["property__address--propertyType"],children:[T.s4.propertyType[r.type]&&(0,n.jsx)(t.g,{icon:T.s4.propertyType[r.type].icon}),T.s4.propertyType[r.type]&&T.s4.propertyType[r.type].name]})]}),(0,n.jsxs)("div",{className:I.property__summary,children:[(0,n.jsxs)("div",{className:I["property__summary--item"],children:[(0,n.jsx)("p",{className:I["property__summary--itemBold"],children:r.numberOfBedrooms}),(0,n.jsx)("p",{className:I["property__summary--itemLight"],children:"Bedrooms"})]}),(0,n.jsxs)("div",{className:I["property__summary--item"],children:[(0,n.jsx)("p",{className:I["property__summary--itemBold"],children:r.numberOfBeds}),(0,n.jsx)("p",{className:I["property__summary--itemLight"],children:"Beds"})]}),(0,n.jsxs)("div",{className:I["property__summary--item"],children:[(0,n.jsx)("p",{className:I["property__summary--itemBold"],children:r.numberOfBathrooms}),(0,n.jsx)("p",{className:I["property__summary--itemLight"],children:"Bathrooms"})]})]})]})]})}},3977:(e,r,s)=>{s.d(r,{t:()=>d});var a=s(6717),t=s(4997);const d=async e=>await(0,a.F)("/map/geo-location",{method:t.y8.POST,data:JSON.stringify({query:e})})},2068:(e,r,s)=>{s.d(r,{$x:()=>o,AK:()=>c,BJ:()=>i,IL:()=>d,LT:()=>l,PI:()=>p,UT:()=>y,V6:()=>n,aX:()=>m,c8:()=>u,i7:()=>f,mc:()=>S,ml:()=>h,vH:()=>_,vI:()=>g,vS:()=>x});var a=s(6717),t=s(4997);const d=async e=>await(0,a.F)("/property/create",{method:t.y8.POST,data:JSON.stringify({formData:e})}),i=async e=>await(0,a.F)("/property/delete",{method:t.y8.POST,data:JSON.stringify({propertyId:e})}),o=async(e,r)=>await(0,a.F)("/property/update",{method:t.y8.POST,data:JSON.stringify({formData:e,propertyId:r})}),n=async e=>await(0,a.F)("/property/upload-image",{method:"POST",data:e,headers:{"Content-Type":"multipart/form-data"}}),c=async(e,r)=>await(0,a.F)("/property/update-images",{method:t.y8.POST,data:JSON.stringify({propertyId:e,images:r})}),p=async e=>await(0,a.F)("/property/delete-floorplan",{method:"POST",data:JSON.stringify({propertyId:e})}),l=async e=>await(0,a.F)("/property/upload-floorplan",{method:"POST",data:e,headers:{"Content-Type":"multipart/form-data"}}),_=async(e,r)=>await(0,a.F)("/property/update-floorplan",{method:t.y8.POST,data:JSON.stringify({propertyId:e,floorplan:r})}),m=async(e,r)=>await(0,a.F)("/property/change-floorplan",{method:t.y8.POST,data:JSON.stringify({propertyId:e,floorplan:r})}),y=async(e,r)=>await(0,a.F)("/property/update-videos",{method:"POST",data:JSON.stringify({videos:e,propertyId:r})}),h=async e=>await(0,a.F)("/property/fetch",{method:t.y8.POST,data:JSON.stringify({skip:e.skip,limit:e.limit})}),u=async e=>await(0,a.F)("/property/fetch-by-id",{method:t.y8.POST,data:JSON.stringify({propertyId:e})}),g=async(e,r)=>await(0,a.F)("/property/nearby-search",{method:t.y8.POST,data:JSON.stringify({coordinates:e,filters:r})}),x=async(e,r)=>await(0,a.F)("/property/delete-image",{method:t.y8.POST,data:JSON.stringify({propertyId:e,imageId:r})}),f=async(e,r)=>await(0,a.F)("/property/update-images-order",{method:t.y8.POST,data:JSON.stringify({propertyId:e,images:r})}),S=async(e,r)=>await(0,a.F)("/property/save-videos",{method:t.y8.POST,data:JSON.stringify({propertyId:e,videos:r})})},7604:(e,r,s)=>{s.r(r),s.d(r,{default:()=>l});var a=s(5043);const t={"heading-primary":"Listings_heading-primary__dKXuN",results:"Listings_results__-r6zr",results__container:"Listings_results__container__sjovR",results__address:"Listings_results__address__3IAJr",results__btn:"Listings_results__btn__pl1Yx",listings__distance:"Listings_listings__distance__eucUm"};var d=s(3977),i=s(2068),o=s(9542),n=s(2494),c=s(8192),p=s(579);const l=()=>{const[e,r]=(0,a.useState)(!0),[s,l]=(0,a.useState)(!1),[_,m]=(0,a.useState)(null),[y,h]=(0,a.useState)(null),[u,g]=(0,a.useState)(null),[x,f]=(0,a.useState)(null),[S,j]=(0,a.useState)(null),[v,N]=(0,a.useState)(1),[b]=(0,a.useState)(10),w=async()=>{try{const e=await(0,i.ml)({skip:Number((v-1)*b),limit:b});e&&200===e.status&&(h(e.data.listings),m(e.data.number))}catch(e){console.log(e)}finally{r(!1)}};return(0,a.useEffect)((()=>{w()}),[v]),e?(0,p.jsx)(o.aH,{}):(0,p.jsxs)(a.Fragment,{children:[(0,p.jsx)(o.Xr,{isOpen:s,onClose:()=>{l(!1)},children:(0,p.jsx)("div",{className:t.results,children:(0,p.jsxs)("div",{className:t.results__container,children:[(0,p.jsx)("div",{className:t.results__header,children:(0,p.jsx)("p",{children:"We found several matches for your address. Please select the correct one."})}),(0,p.jsx)("div",{className:t.results__address,children:S&&S.length>0&&S.map((e=>(0,p.jsx)(n.N8,{address:e,onSelect:e=>f(e),isActive:x&&x.id===e.id},e.id)))}),(0,p.jsx)("div",{className:t.results__btn,children:(0,p.jsx)(o.$n,{mode:"main",onClick:async()=>{if(u){r(!0);try{const e=await(0,i.vI)([x.position.lon,x.position.lat],u);e&&200===e.status&&e.data.properties&&(h(e.data.properties),m(e.data.properties.length),await(0,c.fm)(200),l(!1))}catch(e){console.error(e)}finally{r(!1)}}},children:"Find Nearby Locations"})})]})})}),(0,p.jsxs)("div",{className:t.listings,children:[(0,p.jsx)(n.IW,{onSave:async e=>{r(!0),g(e);try{const r=await(0,d.t)(e.queryString);r&&200===r.status&&(j(r.data.results),await(0,c.fm)(100),l(!0))}catch(s){console.error(s)}finally{r(!1)}},isLoading:e,onClear:async()=>{f(null),await w()}}),(0,p.jsxs)("div",{className:t.listings__container,children:[y&&0===y.length&&(0,p.jsx)("p",{children:"No nearby locations were found. Please try again with a different search or adjust your search criteria."}),y&&y.length>0&&y.map((e=>(0,p.jsxs)(a.Fragment,{children:[x&&(0,p.jsxs)("p",{className:t.listings__distance,children:[(0,p.jsx)("span",{children:"Distance:"}),(0,p.jsx)("span",{children:(0,c.$7)({lat:x.position.lat,lon:x.position.lon},{lat:e.address.position.coordinates[1],lon:e.address.position.coordinates[0]})}),(0,p.jsx)("span",{children:"miles"})]}),(0,p.jsx)(n.y$,{item:e})]},e._id.toString())))]}),(0,p.jsx)(o.dK,{currentPage:v,postsPerPage:b,totalPosts:_||1,paginate:e=>N(e)})]})]})}}}]);
//# sourceMappingURL=604.2bcec39c.chunk.js.map