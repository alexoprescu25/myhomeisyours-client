"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[537],{4791:(e,t,s)=>{s.d(t,{$k:()=>a,Ai:()=>n,EU:()=>l,PD:()=>d,SR:()=>o});var i=s(6717),r=s(4997);const a=async(e,t,s)=>await(0,i.F)("/guest/create",{method:r.y8.POST,data:JSON.stringify({formData:e,propertyId:t,propertyName:s})}),n=async(e,t)=>await(0,i.F)("/guest/delete",{method:r.y8.POST,data:JSON.stringify({guestId:e,propertyName:t})}),d=async e=>await(0,i.F)("/guest/fetch-future-guests",{method:r.y8.POST,data:JSON.stringify({propertyId:e})}),l=async e=>await(0,i.F)("/guest/fetch-past-guests",{method:r.y8.POST,data:JSON.stringify({propertyId:e})}),o=async e=>await(0,i.F)("/guest/fetch",{method:r.y8.POST,data:JSON.stringify({skip:e.skip,limit:e.limit,from:e.from,to:e.to})})},4537:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var i=s(5043);const r={"heading-primary":"Booking_heading-primary__7PsSE",booking__form:"Booking_booking__form__1GmNn",booking__disclaimer:"Booking_booking__disclaimer__CNSYS",delete__container:"Booking_delete__container__pfPK1",delete__image:"Booking_delete__image__v8XG5",delete__actions:"Booking_delete__actions__7jowC",delete__heading:"Booking_delete__heading__7qWRm"};var a=s(2688),n=s(9542),d=s(4858),l=s(4791),o=s(6148),c=s(3538),h=s(579);const u={name:"",phone:"",email:"",checkIn:"",checkOut:"",other:""},m=e=>{let{propertyId:t,propertyName:s}=e;const[m,_]=(0,i.useState)(null),[g,x]=(0,i.useState)(null),[j,p]=(0,i.useState)(null),[k,y]=(0,i.useState)(!1),[f,N]=(0,i.useState)(!1),[S,b]=(0,i.useState)(!1),C=(0,o.j)(),{register:v,handleSubmit:O,formState:{errors:q}}=(0,d.mN)({defaultValues:u}),w=async()=>{try{const e=await(0,l.PD)(t),s=await(0,l.EU)(t);e&&200===e.status&&_(e.data.guests),s&&200===s.status&&x(s.data.guests)}catch(e){console.error(e)}},I=e=>{e&&p(e),y(!0)},B=()=>{p(null),y(!1)};return(0,i.useEffect)((()=>{w()}),[]),m||g?(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(n.Xr,{isOpen:S,onClose:()=>b(!1),children:(0,h.jsx)("div",{className:r.booking__form,children:(0,h.jsxs)("form",{onSubmit:O((async e=>{N(!0);try{const i=await(0,l.$k)(e,t,s);i&&201===i.status&&(await w(),b(!1))}catch(i){console.error(i)}finally{N(!1)}})),children:[(0,h.jsx)(n.pd,{label:"Guest Name",name:"name",register:v,rules:{required:"Guest name is required"},errors:q,required:!0}),(0,h.jsx)(n.pd,{label:"Guest Email",name:"email",register:v,rules:{required:"Guest email is required"},errors:q,required:!0}),(0,h.jsx)(n.pd,{label:"Guest Phone",name:"phone",register:v,rules:{required:"Guest phone is required"},errors:q,required:!0}),(0,h.jsx)(n.pd,{type:"date",label:"Check In",name:"checkIn",register:v,rules:{required:"Check in date is required"},errors:q,required:!0}),(0,h.jsx)(n.pd,{type:"date",label:"Check Out",name:"checkOut",register:v,rules:{required:"Check out date is required"},errors:q,required:!0}),(0,h.jsx)(n.$n,{type:"submit",mode:"main",isLoading:f,children:"Create Guest"})]})})}),(0,h.jsx)(n.Xr,{isOpen:k,onClose:B,children:(0,h.jsx)("div",{className:r.delete,children:(0,h.jsxs)("div",{className:r.delete__container,children:[(0,h.jsx)("div",{className:r.delete__image,children:(0,h.jsx)("img",{src:"/images/exclamation.png",alt:"Exclamation"})}),(0,h.jsxs)("div",{className:r.delete__content,children:[(0,h.jsx)("p",{className:r.delete__heading,children:"Delete Guest"}),(0,h.jsxs)("p",{className:r.delete__text,children:["Are you sure you want to delete guest ",j&&j.name," "]})]}),(0,h.jsxs)("div",{className:r.delete__actions,children:[(0,h.jsx)(n.$n,{mode:"slate-grey",onClick:B,children:"Cancel"}),(0,h.jsx)(n.$n,{mode:"danger",onClick:async()=>{if(j){N(!0);try{const e=await(0,l.Ai)(j._id,s);e&&200===e.status&&(await w(),y(!1),C((0,c.Q)({type:"success",text:e.data.message})))}catch(e){console.error(e)}finally{N(!1)}}},isLoading:f,children:"Delete"})]})]})})}),(0,h.jsx)("div",{className:r.booking,children:(0,h.jsxs)("div",{className:r.booking__container,children:[Boolean(m&&m.length>0)?(0,h.jsx)("div",{className:r.booking__data,children:(0,h.jsxs)(n.XI,{title:"Future Guests",onClick:()=>b(!0),children:[(0,h.jsx)(n.nd,{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Name"}),(0,h.jsx)("th",{children:"Phone"}),(0,h.jsx)("th",{children:"Check In"}),(0,h.jsx)("th",{children:"Check Out"}),(0,h.jsx)("th",{children:"Added By"}),(0,h.jsx)("th",{children:"Actions"})]})}),(0,h.jsx)(n.BF,{children:m&&m.map((e=>(0,h.jsx)(a.Tt,{guest:e,onDelete:I},e._id.toString())))})]})}):(0,h.jsxs)("div",{className:r.booking__disclaimer,children:[(0,h.jsx)("h1",{children:"No Guests Yet!"}),(0,h.jsx)("p",{children:"It looks like you don't have any bookings for your property at the moment."}),(0,h.jsx)("p",{children:'If someone makes a reservation, please add their information by clicking the "Create" button below.'}),(0,h.jsx)(n.$n,{mode:"main",onClick:()=>b(!0),children:"Create"})]}),Boolean(g&&g.length>0)&&(0,h.jsx)("div",{className:r.booking__data,children:(0,h.jsxs)(n.XI,{title:"Past Guests",children:[(0,h.jsx)(n.nd,{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Name"}),(0,h.jsx)("th",{children:"Phone"}),(0,h.jsx)("th",{children:"Check In"}),(0,h.jsx)("th",{children:"Check Out"}),(0,h.jsx)("th",{children:"Added By"}),(0,h.jsx)("th",{children:"Actions"})]})}),(0,h.jsx)(n.BF,{children:g&&g.map((e=>(0,h.jsx)(a.Tt,{guest:e,onDelete:I},e._id.toString())))})]})})]})})]}):(0,h.jsx)(n.aH,{})}}}]);
//# sourceMappingURL=537.6b508802.chunk.js.map