"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[189],{9018:(e,a,s)=>{s.d(a,{$:()=>d});const t={"heading-primary":"FilterDate_heading-primary__jj0iZ",filter__container:"FilterDate_filter__container__cF3TW"};var r=s(4858),i=s(9542),n=s(579);const c={from:"",to:""},d=e=>{let{onSubmitData:a,isLoading:s}=e;const{register:d,handleSubmit:l}=(0,r.mN)({defaultValues:c});return(0,n.jsx)("div",{className:t.filter,children:(0,n.jsx)("div",{className:t.filter__container,children:(0,n.jsxs)("form",{onSubmit:l((async e=>{a(e)})),children:[(0,n.jsx)(i.pd,{type:"date",label:"From",name:"from",register:d,required:!0}),(0,n.jsx)(i.pd,{type:"date",label:"To",name:"to",register:d,required:!0}),(0,n.jsx)(i.$n,{mode:"main",isLoading:s,children:"Filter"})]})})})}},3306:(e,a,s)=>{s.d(a,{ec:()=>d,hU:()=>i,lw:()=>n,mb:()=>c,z0:()=>l});var t=s(6717),r=s(4997);const i=async()=>await(0,t.F)("/user/fetch-all"),n=async e=>await(0,t.F)("/user/delete",{method:r.y8.POST,data:JSON.stringify({accountId:e})}),c=async e=>await(0,t.F)("/user/fetch-by-id",{method:r.y8.POST,data:JSON.stringify({accountId:e})}),d=async(e,a)=>await(0,t.F)("/user/change-password",{method:r.y8.POST,data:JSON.stringify({accountId:e,password:a})}),l=async(e,a)=>await(0,t.F)("/user/update",{method:r.y8.POST,data:JSON.stringify({accountId:e,data:a})})},2189:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var t=s(5043),r=s(5475),i=s(3216);const n={"heading-primary":"AccountDetails_heading-primary__c3P1B",details__container:"AccountDetails_details__container__31FMP",details__info:"AccountDetails_details__info__V845k",details__header:"AccountDetails_details__header__jHQXt",center:"AccountDetails_center__oFhzE",small:"AccountDetails_small__Ut+OI",medium:"AccountDetails_medium__w-MqR",outline:"AccountDetails_outline__a0hPf",account__header:"AccountDetails_account__header__ZpShf",account__form:"AccountDetails_account__form__zfcOU",activity__container:"AccountDetails_activity__container__5tz8S"};var c=s(3306),d=s(6717),l=s(4997);const o=async e=>await(0,d.F)("/activity/fetch",{method:l.y8.POST,data:JSON.stringify({userId:e})}),u={"heading-primary":"ChangePassword_heading-primary__EhS7a",password:"ChangePassword_password__UAl+r",password__form:"ChangePassword_password__form__K5W0h",password__success:"ChangePassword_password__success__9dbv5"};var _=s(9542),m=s(4858),h=s(880),f=s(8192),x=s(579);const j=e=>{let{accountId:a,onSave:s}=e;const[r,i]=(0,t.useState)(""),[n,d]=(0,t.useState)(!1),{control:l,handleSubmit:o,formState:{errors:j}}=(0,m.mN)({defaultValues:h.LG});return(0,t.useEffect)((()=>{(0,f.fm)(3e3).then((()=>{i("")}))}),[r]),(0,x.jsx)(t.Fragment,{children:(0,x.jsx)(_.uA,{className:u.password,children:(0,x.jsxs)("div",{className:u.password__container,children:[(0,x.jsx)(_.hE,{children:"Change Password"}),r&&(0,x.jsx)("div",{className:u.password__success,children:(0,x.jsxs)("p",{children:[" ",r," "]})}),(0,x.jsx)("div",{className:u.password__form,children:(0,x.jsxs)("form",{onSubmit:o((async e=>{d(!0);try{const t=await(0,c.ec)(a,e.password);t&&200===t.status&&(i(t.data.message),s())}catch(t){console.error(t)}finally{d(!1)}})),children:[(0,x.jsx)(m.xI,{name:"password",control:l,rules:{required:"Password is required"},render:e=>{let{field:a}=e;return(0,x.jsx)(_.pd,{type:"password",label:"Password",...a,errors:j})}}),(0,x.jsx)(m.xI,{name:"confirmPassword",control:l,rules:{required:"Confirm password is required"},render:e=>{let{field:a}=e;return(0,x.jsx)(_.pd,{type:"password",label:"Confirm Password",...a,errors:j})}}),(0,x.jsx)(_.$n,{mode:"main",isLoading:n,children:"Save"})]})})]})})})};var y=s(9018);const p=()=>{const[e,a]=(0,t.useState)(null),[s,u]=(0,t.useState)(null),[p,w]=(0,t.useState)(!1),[N,v]=(0,t.useState)(!1),{accountId:S}=(0,i.g)(),{control:g,handleSubmit:b,setValue:A,formState:{errors:F}}=(0,m.mN)({defaultValues:h.ue}),P=async()=>{if(S)try{const e=await o(S);e&&200===e.status&&u(e.data.activities)}catch(e){console.error(e)}};return(0,t.useEffect)((()=>{(async()=>{if(S)try{const e=await(0,c.mb)(S),s=await o(S);e&&200===e.status&&(a(e.data.account),A("firstName",e.data.account.firstName),A("lastName",e.data.account.lastName),A("email",e.data.account.email),A("role",e.data.account.role)),s&&200===s.status&&u(s.data.activities)}catch(e){console.error(e)}})()}),[]),e&&S?(0,x.jsx)(t.Fragment,{children:(0,x.jsxs)("div",{className:n.details,children:[(0,x.jsx)("div",{className:n.details__header,children:(0,x.jsx)(r.N_,{to:"/dashboard/accounts",children:"Back"})}),(0,x.jsxs)("div",{className:n.details__container,children:[(0,x.jsxs)("div",{className:n.details__info,children:[(0,x.jsx)(_.uA,{className:n.account,children:(0,x.jsxs)("div",{className:n.account__details,children:[(0,x.jsx)(_.hE,{children:"Basic Information"}),(0,x.jsxs)("div",{className:n.account__header,children:[(0,x.jsx)(_.Aw,{name:e.fullName}),(0,x.jsxs)("p",{children:[" ",e.fullName," "]})]}),(0,x.jsx)("div",{className:n.account__form,children:(0,x.jsxs)("form",{onSubmit:b((async e=>{if(S){v(!0);try{const a=await(0,c.z0)(S,e);a&&200===a.status&&await P()}catch(a){console.error(a)}finally{v(!1)}}})),children:[(0,x.jsx)(m.xI,{name:"firstName",control:g,rules:{required:"First name is required"},render:e=>{let{field:a}=e;return(0,x.jsx)(_.pd,{label:"First Name",...a,errors:F})}}),(0,x.jsx)(m.xI,{name:"lastName",control:g,rules:{required:"Last name is required"},render:e=>{let{field:a}=e;return(0,x.jsx)(_.pd,{label:"Last Name",...a,errors:F})}}),(0,x.jsx)(m.xI,{name:"email",control:g,rules:{required:"Email is required"},render:e=>{let{field:a}=e;return(0,x.jsx)(_.pd,{label:"Email",...a,errors:F})}}),(0,x.jsx)(m.xI,{name:"role",control:g,rules:{required:"Role is required"},render:e=>{let{field:a}=e;return(0,x.jsx)(_.l6,{...a,optionsArray:h.ke,errors:F,defaultValue:"Role"})}}),(0,x.jsx)(_.$n,{type:"submit",mode:"main",isLoading:N,children:"Save"})]})})]})}),(0,x.jsx)(j,{accountId:S,onSave:P})]}),(0,x.jsxs)(_.uA,{className:n.details__activities,children:[(0,x.jsx)(_.hE,{children:"Activities"}),(0,x.jsx)(y.$,{onSubmitData:async e=>{if(S){w(!0);try{const a=await(async(e,a,s)=>await(0,d.F)("/activity/fetch-by-date",{method:l.y8.POST,data:JSON.stringify({userId:e,from:a,to:s})}))(S,e.from,e.to);a&&200===a.status&&u(a.data.activities)}catch(a){console.error(a)}finally{w(!1)}}},isLoading:p}),s&&s.length>0&&s.map((e=>(0,x.jsx)("div",{className:n.activity,children:(0,x.jsxs)("div",{className:n.activity__container,children:[(0,x.jsxs)("p",{className:n.activity__name,children:[" ",e.description," "]}),(0,x.jsxs)("p",{className:n.activity__date,children:["Date: ",(0,x.jsxs)("strong",{children:[" ",(0,f.Yq)(e.timestamp,"LL")," - ",(0,f.Yq)(e.timestamp,"LT")," "]})," "]})]})},e._id.toString())))]})]})]})}):(0,x.jsx)(_.aH,{})}}}]);
//# sourceMappingURL=189.305edd96.chunk.js.map