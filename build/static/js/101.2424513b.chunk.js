"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[101],{2068:(e,t,a)=>{a.d(t,{$x:()=>n,AK:()=>c,BJ:()=>o,IL:()=>s,LT:()=>p,PI:()=>d,UT:()=>y,V6:()=>l,aX:()=>u,c8:()=>f,i7:()=>g,mc:()=>b,ml:()=>_,vH:()=>h,vI:()=>m,vS:()=>v});var r=a(6717),i=a(4997);const s=async e=>await(0,r.F)("/property/create",{method:i.y8.POST,data:JSON.stringify({formData:e})}),o=async e=>await(0,r.F)("/property/delete",{method:i.y8.POST,data:JSON.stringify({propertyId:e})}),n=async(e,t)=>await(0,r.F)("/property/update",{method:i.y8.POST,data:JSON.stringify({formData:e,propertyId:t})}),l=async e=>await(0,r.F)("/property/upload-image",{method:"POST",data:e,headers:{"Content-Type":"multipart/form-data"}}),c=async(e,t)=>await(0,r.F)("/property/update-images",{method:i.y8.POST,data:JSON.stringify({propertyId:e,images:t})}),d=async e=>await(0,r.F)("/property/delete-floorplan",{method:"POST",data:JSON.stringify({propertyId:e})}),p=async e=>await(0,r.F)("/property/upload-floorplan",{method:"POST",data:e,headers:{"Content-Type":"multipart/form-data"}}),h=async(e,t)=>await(0,r.F)("/property/update-floorplan",{method:i.y8.POST,data:JSON.stringify({propertyId:e,floorplan:t})}),u=async(e,t)=>await(0,r.F)("/property/change-floorplan",{method:i.y8.POST,data:JSON.stringify({propertyId:e,floorplan:t})}),y=async(e,t)=>await(0,r.F)("/property/update-videos",{method:"POST",data:JSON.stringify({videos:e,propertyId:t})}),_=async e=>await(0,r.F)("/property/fetch",{method:i.y8.POST,data:JSON.stringify({skip:e.skip,limit:e.limit})}),f=async e=>await(0,r.F)("/property/fetch-by-id",{method:i.y8.POST,data:JSON.stringify({propertyId:e})}),m=async(e,t)=>await(0,r.F)("/property/nearby-search",{method:i.y8.POST,data:JSON.stringify({coordinates:e,filters:t})}),v=async(e,t)=>await(0,r.F)("/property/delete-image",{method:i.y8.POST,data:JSON.stringify({propertyId:e,imageId:t})}),g=async(e,t)=>await(0,r.F)("/property/update-images-order",{method:i.y8.POST,data:JSON.stringify({propertyId:e,images:t})}),b=async(e,t)=>await(0,r.F)("/property/save-videos",{method:i.y8.POST,data:JSON.stringify({propertyId:e,videos:t})})},2521:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var r=a(5043),i=a(3216),s=a(5475);const o={"heading-primary":"Property_heading-primary__BX9tQ",delete__container:"Property_delete__container__wSFFD",delete__image:"Property_delete__image__OonYC",delete__actions:"Property_delete__actions__RNSQa",delete__heading:"Property_delete__heading__O1y17","property__actions--backButton":"Property_property__actions--backButton__K4622","property__actions--edit":"Property_property__actions--edit__VHN9-",property__actionsbar:"Property_property__actionsbar__KlRUO",active:"Property_active__vZZxP","property__actionsbar--buttonsContainer":"Property_property__actionsbar--buttonsContainer__dTigr",property__item:"Property_property__item__c7KGQ","property__item--delete":"Property_property__item--delete__whhPz",property__header:"Property_property__header__lSgOZ","property__header--lastUpdated":"Property_property__header--lastUpdated__bLo9c",property__heading:"Property_property__heading__jf9wb",property__reminder:"Property_property__reminder__M+lWi",property__availability:"Property_property__availability__IIFGt",property__toggle:"Property_property__toggle__QqhAs",property__activity:"Property_property__activity__EsOa-",breadcrumbs:"Property_breadcrumbs__Ezdqp",breadcrumbs__link:"Property_breadcrumbs__link__7csHE"};var n=a(8139),l=a.n(n),c=a(9542),d=a(9540),p=a(2688),h=a(3910),u=a(7929),y=a(6213),_=a.n(y),f=a(7198),m=a(8192),v=a(2068),g=a(6575),b=a(6148),k=a(3538),x=a(3324),S=a(4811),j=a(579);const P=(0,r.lazy)((()=>Promise.resolve().then(a.bind(a,6158)))),w=(0,r.lazy)((()=>Promise.resolve().then(a.bind(a,4220)))),O=(0,r.lazy)((()=>a.e(537).then(a.bind(a,4537)))),N={general:{name:"General",value:"general"},edit:{name:"Edit",value:"edit"},gallery:{name:"Gallery",value:"gallery"},booking:{name:"Bookings",value:"booking"},activity:{name:"Log",value:"activity"}},T=()=>{const[e,t]=(0,r.useState)("general"),[a,n]=(0,r.useState)(!1),[y,T]=(0,r.useState)(!1),[C,F]=(0,r.useState)(!1),[E,I]=(0,r.useState)(null),{currentUser:B}=(0,S.iZ)(),{propertyId:L}=(0,i.g)(),X=(0,b.j)(),A=(0,i.Zp)(),J=async()=>{if(L)try{const e=await(0,v.c8)(L);if(e&&200===e.status){const t=_().sanitize(e.data.property.description);I({...e.data.property,description:t})}}catch(e){console.error(e)}};return(0,r.useEffect)((()=>{J()}),[]),E&&!y&&B?(0,j.jsxs)(r.Fragment,{children:[(0,j.jsx)(c.Xr,{isOpen:a,onClose:()=>n(!1),children:(0,j.jsx)("div",{className:o.delete,children:(0,j.jsxs)("div",{className:o.delete__container,children:[(0,j.jsx)("div",{className:o.delete__image,children:(0,j.jsx)("img",{src:"/images/exclamation.png",alt:"Exclamation"})}),(0,j.jsxs)("div",{className:o.delete__content,children:[(0,j.jsx)("p",{className:o.delete__heading,children:"Delete Property"}),(0,j.jsxs)("p",{className:o.delete__text,children:["Are you sure you want to delete property ",E.name,"? "]})]}),(0,j.jsxs)("div",{className:o.delete__actions,children:[(0,j.jsx)(c.$n,{mode:"slate-grey",onClick:()=>n(!1),children:"Cancel"}),(0,j.jsx)(c.$n,{mode:"danger",onClick:async()=>{if(L){T(!0);try{const e=await(0,v.BJ)(L);e&&200===e.status&&(X((0,k.Q)({type:"success",text:e.data.message})),A("/dashboard/properties/list"))}catch(e){console.error(e)}finally{T(!1)}}},isLoading:C,children:"Delete"})]})]})})}),(0,j.jsxs)("div",{className:o.property,children:[(0,j.jsxs)("div",{className:o.breadcrumbs,children:[(0,j.jsx)(s.N_,{to:"/dashboard/properties/list",className:o.breadcrumbs__link,children:"Listings"}),(0,j.jsx)("p",{className:o.breadcrumbs__bar,children:">"}),(0,j.jsxs)("p",{className:o.breadcrumbs__current,children:[" ",E._id," "]})]}),(0,j.jsxs)("div",{className:o.property__header,children:[(0,j.jsx)("div",{className:o["property__header--title"],children:(0,j.jsxs)("h1",{className:o.property__heading,children:[" ",E.name," "]})}),(0,j.jsxs)("div",{className:o["property__header--lastUpdated"],children:[(0,j.jsxs)("p",{children:["Created: ",(0,m.Yq)(E.createdAt,"LL")]}),E.updatedBy&&E.updatedBy.length>0&&(0,j.jsxs)("p",{children:["Last updated: ",(0,m.Yq)(E.updatedAt,"LL")," - ",(0,m.Yq)(E.updatedAt,"LT")," by ",E.updatedBy[0].name," "]})]})]}),(0,j.jsxs)("div",{className:o.property__actionsbar,children:[(0,j.jsx)("div",{className:o["property__actionsbar--buttonsContainer"],children:Object.values(N).map(((a,r)=>(0,j.jsx)("div",{className:l()(o.property__item,{[o.active]:e===a.value}),onClick:()=>{return e=a.value,void t(e);var e},children:(0,j.jsxs)("p",{children:[" ",a.name," "]})},r)))}),(0,j.jsxs)("div",{className:o["property__actionsbar--buttonsContainer"],children:[(0,j.jsxs)(s.N_,{to:"/dashboard/properties/list",className:o.property__item,children:[(0,j.jsx)(h.g,{icon:u.CeG}),"Back"]}),(0,x._m)(B.role,x.ld.actions.DELETE_PROPERTY)&&(0,j.jsx)("button",{className:l()(o.property__item,o["property__item--delete"]),onClick:()=>n(!0),children:"Delete Property"})]})]}),(0,j.jsxs)("div",{children:[e===N.general.value&&(0,j.jsx)(P,{property:E}),e===N.edit.value&&(0,j.jsxs)("div",{className:o.property__edit,children:[(0,j.jsxs)("div",{className:o.property__reminder,children:[(0,j.jsx)("p",{children:"Reminder: Save Your Changes!"}),(0,j.jsxs)("p",{children:["If you've made any changes, please hit the ",(0,j.jsx)("strong",{children:"Edit Property"})," button at the bottom of the page before you leave to ensure your updates are applied. Thank you!"]})]}),(0,j.jsx)("div",{className:o.property__availability,children:(0,j.jsxs)("div",{className:o.property__toggle,children:[(0,j.jsx)(g.A,{onChange:e=>{const{id:t}=e.target;I((e=>({...e,[t]:!e[t]})))},name:"isActive",id:"isActive","aria-label":"Active",checked:E.isActive}),(0,j.jsx)("p",{children:"Active"})]})}),(0,j.jsx)(d.GW,{isLoading:C,config:f.$,edit:!0,initialState:E,onSubmitData:async e=>{if(L){F(!0);try{const a=await(0,v.$x)({...e,isActive:E.isActive},L);a&&200===a.status&&(await J(),await(0,m.fm)(100),t(N.general.value))}catch(a){console.error(a)}finally{F(!1)}}}})]}),e===N.gallery.value&&(0,j.jsx)(w,{videos:E.videos,onUpdateVideos:async e=>{T(!0);try{const t=await(0,v.mc)(E._id.toString(),e);t&&200===t.status&&(await J(),X((0,k.Q)({type:"success",text:t.data.message})))}catch(t){console.error(t)}finally{T(!1)}},floorplan:E.floorplan,onSaveFloorplan:async e=>{let t;T(!0);const a=new FormData;a.append("image",e);try{const e=await(0,v.LT)(a);if(e&&200===e.status){const a={key:e.data.key,name:e.data.name,url:e.data.url};t=E.floorplan&&E.floorplan.url?await(0,v.aX)(E._id.toString(),a):await(0,v.vH)(E._id.toString(),a),t&&200===t.status&&await J()}}catch(r){console.error(r)}finally{T(!1)}},onSaveGallery:async e=>{if(e){T(!0);try{const t=new FormData;let a;for(const i of e)t.append("images",i);const r=await(0,v.V6)(t);r&&200===r.status&&(a=await(0,v.AK)(E._id.toString(),r.data.images),a&&200===a.status&&await J())}catch(t){console.error(t)}finally{T(!1)}}},onDeleteFloorplan:async()=>{T(!0);try{const e=await(0,v.PI)(E._id.toString());e&&200===e.status&&await J()}catch(e){console.error(e)}finally{T(!1)}},onUpdateOrder:async e=>{if(L){T(!0);try{const a=await(0,v.i7)(L,e);a&&200===a.status&&(await J(),t(N.general.value))}catch(a){console.error(a)}finally{T(!1)}}},gallery:E.images,onDelete:async e=>{if(L){T(!0);try{const t=await(0,v.vS)(L,e);t&&200===t.status&&await J()}catch(t){console.error(t)}finally{T(!1)}}}}),e===N.booking.value&&(0,j.jsx)(O,{propertyId:E._id.toString(),propertyName:E.name}),e===N.activity.value&&E.updatedBy&&E.updatedBy.length>0&&(0,j.jsx)("div",{className:o.property__activity,children:E.updatedBy.map((e=>(0,j.jsx)(p.O1,{activity:e},e._id.toString())))})]})]})]}):(0,j.jsx)(c.aH,{})}},7171:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});var r,i=a(5043),s=(r=i)&&r.__esModule?r:{default:r};t.default=function(){return s.default.createElement("svg",{width:"14",height:"11",viewBox:"0 0 14 11"},s.default.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}))}},6575:(e,t,a)=>{var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=a(5043),o=h(s),n=h(a(8139)),l=h(a(5173)),c=h(a(7171)),d=h(a(4019)),p=a(4671);function h(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a.handleTouchStart=a.handleTouchStart.bind(a),a.handleTouchMove=a.handleTouchMove.bind(a),a.handleTouchEnd=a.handleTouchEnd.bind(a),a.handleFocus=a.handleFocus.bind(a),a.handleBlur=a.handleBlur.bind(a),a.previouslyChecked=!(!e.checked&&!e.defaultChecked),a.state={checked:!(!e.checked&&!e.defaultChecked),hasFocus:!1},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidUpdate",value:function(e){e.checked!==this.props.checked&&this.setState({checked:!!this.props.checked})}},{key:"handleClick",value:function(e){if(!this.props.disabled){var t=this.input;if(e.target!==t&&!this.moved)return this.previouslyChecked=t.checked,e.preventDefault(),t.focus(),void t.click();var a=this.props.hasOwnProperty("checked")?this.props.checked:t.checked;this.setState({checked:a})}}},{key:"handleTouchStart",value:function(e){this.props.disabled||(this.startX=(0,p.pointerCoord)(e).x,this.activated=!0)}},{key:"handleTouchMove",value:function(e){if(this.activated&&(this.moved=!0,this.startX)){var t=(0,p.pointerCoord)(e).x;this.state.checked&&t+15<this.startX?(this.setState({checked:!1}),this.startX=t,this.activated=!0):t-15>this.startX&&(this.setState({checked:!0}),this.startX=t,this.activated=t<this.startX+5)}}},{key:"handleTouchEnd",value:function(e){if(this.moved){var t=this.input;if(e.preventDefault(),this.startX){var a=(0,p.pointerCoord)(e).x;!0===this.previouslyChecked&&this.startX+4>a?this.previouslyChecked!==this.state.checked&&(this.setState({checked:!1}),this.previouslyChecked=this.state.checked,t.click()):this.startX-4<a&&this.previouslyChecked!==this.state.checked&&(this.setState({checked:!0}),this.previouslyChecked=this.state.checked,t.click()),this.activated=!1,this.startX=null,this.moved=!1}}}},{key:"handleFocus",value:function(e){var t=this.props.onFocus;t&&t(e),this.setState({hasFocus:!0})}},{key:"handleBlur",value:function(e){var t=this.props.onBlur;t&&t(e),this.setState({hasFocus:!1})}},{key:"getIcon",value:function(e){var a=this.props.icons;return a?void 0===a[e]?t.defaultProps.icons[e]:a[e]:null}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,i=(t.icons,function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(t,["className","icons"])),s=(0,n.default)("react-toggle",{"react-toggle--checked":this.state.checked,"react-toggle--focus":this.state.hasFocus,"react-toggle--disabled":this.props.disabled},a);return o.default.createElement("div",{className:s,onClick:this.handleClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd},o.default.createElement("div",{className:"react-toggle-track"},o.default.createElement("div",{className:"react-toggle-track-check"},this.getIcon("checked")),o.default.createElement("div",{className:"react-toggle-track-x"},this.getIcon("unchecked"))),o.default.createElement("div",{className:"react-toggle-thumb"}),o.default.createElement("input",r({},i,{ref:function(t){e.input=t},onFocus:this.handleFocus,onBlur:this.handleBlur,className:"react-toggle-screenreader-only",type:"checkbox"})))}}]),t}(s.PureComponent);t.A=u,u.displayName="Toggle",u.defaultProps={icons:{checked:o.default.createElement(c.default,null),unchecked:o.default.createElement(d.default,null)}},u.propTypes={checked:l.default.bool,disabled:l.default.bool,defaultChecked:l.default.bool,onChange:l.default.func,onFocus:l.default.func,onBlur:l.default.func,className:l.default.string,name:l.default.string,value:l.default.string,id:l.default.string,"aria-labelledby":l.default.string,"aria-label":l.default.string,icons:l.default.oneOfType([l.default.bool,l.default.shape({checked:l.default.node,unchecked:l.default.node})])}},4671:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pointerCoord=function(e){if(e){var t=e.changedTouches;if(t&&t.length>0){var a=t[0];return{x:a.clientX,y:a.clientY}}var r=e.pageX;if(void 0!==r)return{x:r,y:e.pageY}}return{x:0,y:0}}},4019:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});var r,i=a(5043),s=(r=i)&&r.__esModule?r:{default:r};t.default=function(){return s.default.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},s.default.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"}))}}}]);
//# sourceMappingURL=101.2424513b.chunk.js.map